This is a [Next.js](https://nextjs.org/) project bootstrapped with [`create-next-app`](https://github.com/vercel/next.js/tree/canary/packages/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/basic-features/font-optimization) to automatically optimize and load Inter, a custom Google Font.

## Configuration

### Discord OAuth Setup

This application uses Supabase for authentication with Discord OAuth. To enable Discord sign-in, you need to configure it in both Discord and Supabase:

#### 1. Create a Discord Application

1. Go to the [Discord Developer Portal](https://discord.com/developers/applications)
2. Click "New Application" and give it a name
3. Navigate to **OAuth2** → **General**
4. Copy your **Client ID** and **Client Secret** (you'll need these for Supabase)
5. Under **Redirects**, add your Supabase callback URL:
   - Format: `https://YOUR_PROJECT_REF.supabase.co/auth/v1/callback`
   - Replace `YOUR_PROJECT_REF` with your actual Supabase project reference

#### 2. Enable Discord Provider in Supabase

1. Go to your [Supabase Dashboard](https://supabase.com/dashboard)
2. Select your project
3. Navigate to **Authentication** → **Providers**
4. Find **Discord** in the list of providers and click to configure
5. Enable the Discord provider
6. Enter your Discord **Client ID** and **Client Secret** from step 1
7. Save the configuration

#### 3. Environment Variables

Make sure you have the following environment variables set:

```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

After completing these steps, Discord sign-in should work correctly.

### Adding Workgroup Data

Workgroups are stored in the Supabase `workgroups` table and define the configuration for different meeting groups. There are several ways to add workgroup data:

#### Method 1: Through the UI (Recommended)

1. Navigate to the **Submit Meeting Summary** page (`/submit-meeting-summary`)
2. Click on the workgroup selector dropdown
3. Select **"Add New Workgroup"** or type a new workgroup name
4. Enter the workgroup name and click to register it
5. The system will automatically create the workgroup with default template settings

#### Method 2: Directly in Supabase Database

1. Go to your [Supabase Dashboard](https://supabase.com/dashboard)
2. Select your project
3. Navigate to **Table Editor** → **workgroups**
4. Click **Insert** → **Insert row**
5. Fill in the required fields:
   - `workgroup` (text): The name of the workgroup (e.g., "Archives Workgroup")
   - `workgroup_id` (UUID): Will be auto-generated if left empty
   - `preferred_template` (JSON): Template configuration (see structure below)
   - `last_meeting_id` (optional): Reference to the last meeting

**Default Template Structure:**
```json
{
  "workgroup": "Your Workgroup Name",
  "workgroup_id": "",
  "meetingInfo": {
    "name": 1,
    "date": 1,
    "host": 1,
    "documenter": 1,
    "peoplePresent": 1,
    "purpose": 1,
    "townHallNumber": 0,
    "googleSlides": 0,
    "meetingVideoLink": 1,
    "miroBoardLink": 0,
    "otherMediaLink": 0,
    "transcriptLink": 1,
    "mediaLink": 0,
    "workingDocs": 1,
    "timestampedVideo": 0
  },
  "agendaItems": [{
    "agenda": 0,
    "status": 0,
    "narrative": 0,
    "townHallUpdates": 0,
    "townHallSummary": 0,
    "meetingTopics": 0,
    "issues": 0,
    "actionItems": 1,
    "decisionItems": 1,
    "discussionPoints": 1,
    "gameRules": 0,
    "learningPoints": 0
  }],
  "tags": 1,
  "type": "Custom",
  "noSummaryGiven": false,
  "canceledSummary": false
}
```

**Note:** In the template, `1` means the field is enabled/required, and `0` means it's disabled/optional.

#### Method 3: Programmatically

You can use the `updateWorkgroups` utility function in your code:

```javascript
import { updateWorkgroups } from '../utils/updateWorkgroups';

// Add a new workgroup
await updateWorkgroups({ 
  workgroup: "New Workgroup Name" 
});
```

This will automatically create the workgroup with default template settings. The `workgroup_id` will be auto-generated by Supabase.

### Data Templates Overview

The application uses several types of templates and data structures:

#### 1. Workgroup Preferred Templates (`preferred_template`)

Stored in the `workgroups` table, these templates control which fields are enabled/visible for each workgroup. Each template has two main sections:

**Meeting Info Fields:**
- `name` - Meeting type/name (Weekly, Monthly, etc.)
- `date` - Meeting date
- `host` - Meeting host
- `documenter` - Person documenting the meeting
- `peoplePresent` - List of attendees
- `purpose` - Meeting purpose
- `townHallNumber` - Town hall number (for town halls)
- `googleSlides` - Link to Google Slides
- `meetingVideoLink` - Link to meeting video
- `miroBoardLink` - Link to Miro board
- `otherMediaLink` - Other media links
- `transcriptLink` - Link to transcript
- `mediaLink` - Additional media link
- `workingDocs` - Array of working documents (title + link)
- `timestampedVideo` - Object with video URL, intro, and timestamps

**Agenda Item Fields:**
- `agenda` - Agenda title
- `status` - Status (carry over, resolved)
- `narrative` - Narrative description
- `townHallUpdates` - Town hall updates
- `townHallSummary` - Town hall summary
- `meetingTopics` - Array of meeting topics
- `issues` - Array of issues
- `actionItems` - Array of action items (text, assignee, dueDate, status)
- `decisionItems` - Array of decision items (decision, rationale, opposing, effect)
- `discussionPoints` - Array of discussion points
- `gameRules` - Game rules (for gamified meetings)
- `learningPoints` - Array of learning points

**Tags:**
- `topicsCovered` - Topics covered in the meeting
- `emotions` - Emotional tone
- `other` - Other tags
- `gamesPlayed` - Games played (if applicable)

#### 2. Meeting Type Configurations

Defined in `config/meeting/meetingTypesConfig.ts`, these control which meeting types are available for each workgroup:

**Default Meeting Types:**
- Weekly
- Biweekly
- Monthly
- One-off event

**Workgroup-Specific Types:**
- **AI Sandbox/Think-tank**: Sandbox, Think-Tank

To add custom meeting types for a workgroup, edit `config/meeting/meetingTypesConfig.ts`:

```typescript
export const meetingTypesConfig: WorkgroupMeetingTypes = {
  default: {
    defaultType: 'Weekly',
    types: [
      { value: 'Weekly', label: 'Weekly' },
      { value: 'Biweekly', label: 'Biweekly' },
      { value: 'Monthly', label: 'Monthly' },
      { value: 'One-off event', label: 'One-off event' },
    ]
  },
  'Your Workgroup Name': {
    defaultType: 'Weekly',
    types: [
      { value: 'CustomType1', label: 'Custom Type 1' },
      { value: 'CustomType2', label: 'Custom Type 2' },
    ]
  }
};
```

#### 3. Summary Form Data Structure

The complete meeting summary data structure (defined in `types/summaryFormData.schema.json`) includes:

- **Workgroup Info**: `workgroup` (name), `workgroup_id` (UUID)
- **Meeting Info**: All the fields listed in the preferred template
- **Agenda Items**: Array of agenda items with all their fields
- **Tags**: Topics, emotions, games, etc.
- **Type**: Currently only "Custom" or "custom"
- **Flags**: `noSummaryGiven`, `canceledSummary` with customizable text

#### 4. Action Item Status Options

Action items can have the following statuses:
- `todo`
- `in progress`
- `done`
- `cancelled`

#### 5. Decision Item Effect Options

Decision items can have the following effect values:
- `""` (empty)
- `affectsOnlyThisWorkgroup`
- `mayAffectOtherPeople`

#### 6. Agenda Item Status Options

Agenda items can have the following statuses:
- `carry over`
- `resolved`

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js/) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/deployment) for more details.

Archive data last updated at - 2025-12-05 01:06:20 UTC
